// ==UserScript==
// @icon https://www.user-scripts.org/icons/scroll-success.png
// @downloadUrl https://www.user-scripts.org/scripts/eNtHuWYuxgjwCFn.user.js
// @homepageUrl https://www.user-scripts.org/scripts/eNtHuWYuxgjwCFn
// @version 2
// @namespace user-scripts.org user #499
// @author idom
// @name         Fakepay
// @description  A fake payout UI for roblox. for my real ass black niggers. iDom was here, immortal.st today!
// @match        https://www.roblox.com/communities/*
// @grant        none
// ==/UserScript==

(function () {
    'use strict';

    const RETARDEDFUCKINGCIRCLE = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzhBODQ5MSI+PHBhdGggZD0iTTEyIDJBNEMxMiAyIDggNCA4IDhDNCAxMiA4IDEzIDggMTRIMTZDMTYgMTMgMTYgMTIgMTYgOEMxNiA0IDEyIDJaTTEyIDE1QzguOTE3IDE1IDYgMTcuOTE3IDYgMjFWMjJIMThWMjFDMTggMTcuOTE3IDE1LjA4MyAxNSAxMiAxNVoiLz48L3N2Zz4=";

    const style = document.createElement('style');
    style.textContent = `
        #fakePayoutBtn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #232527;
            color: white;
            font-weight: 600;
            border: 1px solid #3b3b3b;
            padding: 10px 16px;
            border-radius: 8px;
            z-index: 9999;
            cursor: pointer;
            font-family: 'Gotham SSm', sans-serif;
        }
        .payout-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 99999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .payout-overlay.open {
            opacity: 1;
        }
        .payout-window {
            background: #1b1b1b;
            padding: 20px;
            border-radius: 10px;
            width: 320px;
            box-shadow: 0 0 14px rgba(0,0,0,0.6);
            font-family: 'Gotham SSm', sans-serif;
            color: white;
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .payout-overlay.open .payout-window {
            opacity: 1;
            transform: translateY(0);
        }
        /* NOTE: The .closing class has been removed as it's no longer necessary */
        .username-container {
            display: flex; align-items: center; background: #2a2a2a; border: 1px solid #3b3b3b;
            border-radius: 6px; margin-bottom: 12px; padding-left: 8px;
        }
        #payout-user-avatar {
            width: 32px; height: 32px; border-radius: 50%; background-color: #3b3b3b;
            flex-shrink: 0; margin-right: 8px;
        }
        #payout-username, #payout-amount {
            width: 100%; padding: 10px; background: #2a2a2a; border: 1px solid #3b3b3b;
            border-radius: 6px; color: white; margin-bottom: 12px; font-size: 14px; box-sizing: border-box;
        }
        #payout-username { padding: 10px 10px 10px 0; background: none; border: none; margin-bottom: 0; }
        #payout-username:focus, #payout-amount:focus {
            outline: none;
        }
        .payout-window button#send-fake {
            width: 100%; padding: 10px; background-color: #3A74D7; color: white;
            font-weight: 600; border: none; border-radius: 6px; cursor: pointer;
            margin-top: 8px; font-size: 14px; transition: opacity 0.2s ease;
            position: relative;
        }
        button#cancel-fake {
            background: none; color: #aaa; margin-top: 4px; width: 100%;
            padding: 10px; cursor: pointer; border: none; font-weight: 600;
        }
        .roblox-spinner {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: #fff;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            position: absolute;
            top: 50%; left: 50%;
            margin-top: -10px; margin-left: -10px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        button.loading {
            color: transparent !important;
            pointer-events: none;
        }
        button.loading .roblox-spinner {
            display: block;
        }
        .system-feedback .alert-system-feedback .alert {
            z-index: 100001; width: 100%; max-width: 970px; margin: 0 auto;
            transition: top 0.3s ease; position: fixed; top: -42px; left: 0; right: 0;
            padding: 12px 0; text-align: center; font-family: "Gotham SSm", sans-serif;
            font-weight: 500; font-size: 14px; user-select: none;
        }
        .system-feedback .alert-system-feedback .alert.on { top: 0; }
        .system-feedback .alert-system-feedback .alert.alert-success { background-color: #39c582; color: #FFFFFF; }
    `;
    document.head.appendChild(style);

    const FaggotBTN = document.createElement('button');
    FaggotBTN.id = 'fakePayoutBtn';
    FaggotBTN.textContent = 'ðŸ’¸'; //idk this shit gay ngl
    document.body.appendChild(FaggotBTN);

    const togglePayoutUI = () => {
        const existingOverlay = document.querySelector('.payout-overlay');
        if (existingOverlay) {
            closePayoutUI(existingOverlay);
        } else {
            NIGGERHELLYEAH();
        }
    };

    FaggotBTN.onclick = togglePayoutUI;

    function NIGGERHELLYEAH() {
        const overlay = document.createElement('div');
        overlay.className = 'payout-overlay';
        overlay.innerHTML = `
            <div class="payout-window">
                <h2>Send Group Payout</h2>
                <div class="username-container">
                    <img id="payout-user-avatar" src="${RETARDEDFUCKINGCIRCLE}" alt="Avatar">
                    <input id="payout-username" placeholder="Username" autocomplete="off" spellcheck="false" />
                </div>
                <input id="payout-amount" placeholder="Amount (R$)" type="number" min="1" />
                <button id="send-fake">Send<span class="roblox-spinner"></span></button>
                <button id="cancel-fake">Cancel</button>
            </div>`;
        document.body.appendChild(overlay);

        setTimeout(() => overlay.classList.add('open'), 10);

        const RetardedUser = overlay.querySelector('#payout-username');
        const RetardedAmount = overlay.querySelector('#payout-amount');
        const sexyrobloxavatar = overlay.querySelector('#payout-user-avatar');
        const OMGPLSROBUXME = overlay.querySelector('#send-fake');
        const idontwantrobux = overlay.querySelector('#cancel-fake');

        let debounceTimer;
        RetardedUser.addEventListener('input', () => {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => fetchUserAvatar(RetardedUser.value.trim(), sexyrobloxavatar), 300);
        });

        OMGPLSROBUXME.onclick = () => {
            const user = RetardedUser.value.trim();
            const amount = RetardedAmount.value.trim();
            if (!user || !amount || Number(amount) <= 0) {
                alert('Please fill in both fields with valid data!');
                return;
            }

            OMGPLSROBUXME.disabled = true;
            idontwantrobux.disabled = true;
            OMGPLSROBUXME.classList.add('loading');

            setTimeout(() => {
                closePayoutUI(overlay, () => {
                    showAlertBanner(`Successfully sent R$${amount} to ${user}`);
                });
            }, 3200); //CHANGE THIS TIMEOUT TO WHATEVER YOU WANT, THIS IS FOR THE LOADING SEQUENCE
        };

        idontwantrobux.onclick = () => closePayoutUI(overlay);
    }

    function closePayoutUI(overlay, callback) {
        if (!overlay) return;

        overlay.classList.remove('open');

        setTimeout(() => {
            overlay.remove();
            if (callback) {
                callback();
            }
        }, 300); //TIMEOUT FOR THE GREEN SUCCESS SHITTY
    }

    async function fetchUserAvatar(username, avatarElement) {
        if (!username) { avatarElement.src = RETARDEDFUCKINGCIRCLE; return; }
        try {
            const userResponse = await fetch('https://users.roblox.com/v1/usernames/users', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
                body: JSON.stringify({ usernames: [username], excludeBannedUsers: true })
            });
            const userData = await userResponse.json();
            const userId = userData.data?.[0]?.id;
            if (!userId) throw new Error('User not found');
            const thumbResponse = await fetch(`https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${userId}&size=48x48&format=Png&isCircular=false`);
            const thumbData = await thumbResponse.json();
            const imageUrl = thumbData.data?.[0]?.imageUrl;
            if (imageUrl) avatarElement.src = imageUrl;
            else throw new Error('Avatar thumbnail not found');
        } catch (error) {
            console.error('Error fetching avatar:', error.message);
            avatarElement.src = RETARDEDFUCKINGCIRCLE;
        }
    }

    function showAlertBanner(message) {
        const existingBanner = document.querySelector('.system-feedback');
        if (existingBanner) existingBanner.remove();

        const systemFeedback = document.createElement('div');
        systemFeedback.className = 'system-feedback';
        systemFeedback.innerHTML = `<div class="alert-system-feedback"><div class="alert alert-success"><span class="alert-content">${message}</span></div></div>`;
        document.body.appendChild(systemFeedback);

        const alertDiv = systemFeedback.querySelector('.alert');
        setTimeout(() => alertDiv.classList.add('on'), 10);

        setTimeout(() => {
            alertDiv.classList.remove('on');
            alertDiv.addEventListener('transitionend', () => systemFeedback.remove(), { once: true });
        }, 3000);
    }

    document.addEventListener('keydown', (event) => {
        const activeElement = document.activeElement;
        const isTyping = activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA' || activeElement.isContentEditable);
        if (isTyping) return;
        if (event.key.toLowerCase() === 'g') togglePayoutUI(); //Change keybind if you want
    });
})();
